import React from 'react';
import { Page, Text, View, Document, StyleSheet, Font } from '@react-pdf/renderer';

// Define styles
const styles = StyleSheet.create({
    page: {
        padding: 40,
        backgroundColor: '#ffffff',
        fontFamily: 'Helvetica',
    },
    header: {
        marginBottom: 20,
        borderBottomWidth: 2,
        borderBottomColor: '#2563eb', // Primary Blue
        paddingBottom: 10,
    },
    title: {
        fontSize: 24,
        fontWeight: 'bold',
        color: '#0f172a', // Slate 900
        marginBottom: 5,
    },
    subtitle: {
        fontSize: 12,
        color: '#64748b', // Slate 500
    },
    section: {
        marginBottom: 20,
        padding: 15,
        backgroundColor: '#f8fafc', // Slate 50
        borderRadius: 8,
    },
    sectionTitle: {
        fontSize: 14,
        fontWeight: 'bold',
        color: '#2563eb',
        marginBottom: 8,
        textTransform: 'uppercase',
    },
    scriptBox: {
        marginTop: 5,
        padding: 10,
        borderLeftWidth: 4,
        borderLeftColor: '#2563eb',
        backgroundColor: '#ffffff',
    },
    scriptText: {
        fontSize: 16,
        fontStyle: 'italic',
        lineHeight: 1.5,
        color: '#334155',
    },
    partnerBox: {
        marginTop: 30,
        padding: 20,
        backgroundColor: '#eff6ff', // Blue 50
        borderRadius: 8,
        borderWidth: 1,
        borderColor: '#bfdbfe',
    },
    partnerTitle: {
        fontSize: 12,
        fontWeight: 'bold',
        color: '#1e40af',
        marginBottom: 10,
        textAlign: 'center',
        textTransform: 'uppercase',
    },
    partnerText: {
        fontSize: 18,
        textAlign: 'center',
        color: '#1e3a8a',
        fontWeight: 'bold',
    },
    footer: {
        position: 'absolute',
        bottom: 30,
        left: 40,
        right: 40,
        textAlign: 'center',
        fontSize: 10,
        color: '#94a3b8',
    },
});

interface CheatSheetProps {
    data: {
        lensName: string;
        stateName: string;
        scripts: {
            inTheMoment: string;
            repair: string;
        };
        partnerTranslation: string;
    };
}

export const CheatSheetPDF: React.FC<CheatSheetProps> = ({ data }) => (
    <Document>
        <Page size="A4" style={styles.page}>

            {/* Header */}
            <View style={styles.header}>
                <Text style={styles.title}>The Fridge Sheet</Text>
                <Text style={styles.subtitle}>Emergency protocol for {data.lensName.replace('_', ' ')} dynamics</Text>
            </View>

            {/* Intro */}
            <View style={{ marginBottom: 20 }}>
                <Text style={{ fontSize: 12, color: '#334155', lineHeight: 1.4 }}>
                    Keep this sheet visible (fridge, desk, saved on phone). precise language prevents escalation when your nervous system is flooded.
                </Text>
            </View>

            {/* Section 1: In The Moment */}
            <View style={styles.section}>
                <Text style={styles.sectionTitle}>⚠️ When I am Triggered</Text>
                <Text style={{ fontSize: 10, color: '#64748b', marginBottom: 5 }}>
                    (Read this exact sentence. Do not add explanations.)
                </Text>
                <View style={styles.scriptBox}>
                    <Text style={styles.scriptText}>"{data.scripts.inTheMoment}"</Text>
                </View>
            </View>

            {/* Section 2: Repair */}
            <View style={styles.section}>
                <Text style={styles.sectionTitle}>✅ When We Are Calm</Text>
                <Text style={{ fontSize: 10, color: '#64748b', marginBottom: 5 }}>
                    (To re-open the conversation safely.)
                </Text>
                <View style={styles.scriptBox}>
                    <Text style={styles.scriptText}>"{data.scripts.repair}"</Text>
                </View>
            </View>

            {/* Section 3: Partner Translation */}
            <View style={styles.partnerBox}>
                <Text style={styles.partnerTitle}>For My Partner to Read</Text>
                <Text style={styles.partnerText}>"{data.partnerTranslation}"</Text>
            </View>

            <Text style={styles.footer}>
                Generated by UnderstandYourPartner.com • Confidential User Manual
            </Text>
        </Page>
    </Document>
);
